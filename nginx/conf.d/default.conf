server {
    listen 80;
    # include overall_ssl.conf;

    index index.php index.html index.htm;
    server_name _;

    # determine the project root directory
    set ${DOLLAR}project_root /var/www/html/;
    if (-d ${DOLLAR}project_root/public_html) {
        set ${DOLLAR}project_root ${DOLLAR}project_root/public_html;
    }
    if (-d ${DOLLAR}project_root/web) {
        set ${DOLLAR}project_root ${DOLLAR}project_root/web;
    }

    root ${DOLLAR}project_root;

    # Load configuration files from nginx-partials
    include /etc/nginx/conf.d/partials/*.conf;

    # Pass PHP scripts to PHP-FPM
    location ~ \.php${DOLLAR} {

        # nginx will now start if host is not reachable
        set ${DOLLAR}upstream php:9000;

        fastcgi_pass    ${DOLLAR}upstream;
        fastcgi_param   SERVER_NAME         ${DOLLAR}host;
        fastcgi_param   SCRIPT_NAME         ${DOLLAR}fastcgi_script_name;
        fastcgi_param   SCRIPT_FILENAME     ${DOLLAR}document_root${DOLLAR}fastcgi_script_name;
        include         fastcgi_params;
    }

    error_log /var/log/nginx/php_error.log;
    access_log /var/log/nginx/php_access.log;

    include overall_params.conf;
}